<!doctype html>
<html lang="lo">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blog — Codecools Company</title>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml" />
  <meta property="og:title" content="Blog — Codecools Company" />
  <meta property="og:description" content="ບົດຄວາມຕົວຢ່າງ (Lao)" />
  <link rel="stylesheet" href="/assets/css/style.css" />
</head>
<body>
  <header class="site-header container">
    <a class="brand" href="/"><img src="/assets/img/logo.svg" alt="logo" /> <span>Codecools Company</span></a>
    <nav class="nav">
      <a href="/projects.html">Projects</a>
      <a href="/blog.html">Blog</a>
      <a href="/about.html">About</a>
      <a href="/contact.html" class="btn">Contact</a>
    </nav>
  </header>

  <main class="container">
    <h1>Blog</h1>
    <input id="q" placeholder="ຄົ້ນຫາຫົວຂໍ້..." style="width:100%;max-width:520px;padding:.7rem;border-radius:.6rem;border:1px solid #1f2a3b;background:#121722;color:#e6edf3" />
    <div id="tags" style="margin:.6rem 0; display:flex; gap:.4rem; flex-wrap:wrap"></div>
    <div class="list" id="post-list"></div>
  </main>

  <footer class="site-footer"><div class="container">© <span id="year"></span> Codecools Company</div></footer>
  <script src="/assets/js/main.js" defer></script>
  <script>
  let posts = [];
  fetch('/data/posts.json').then(r=>r.json()).then(d=>{ posts = d; render(posts); renderTags(); });
  const wrap = document.getElementById('post-list');
  const tagsWrap = document.getElementById('tags');
  function render(list){
    wrap.innerHTML='';
    list.forEach(p=>{
      const a = document.createElement('article'); a.className='item';
      a.innerHTML = `<h4>${p.title}</h4><div class="muted">${new Date(p.date).toLocaleDateString('lo-LA')}</div><p>${p.excerpt}</p>`;
      wrap.appendChild(a);
    });
  }
  function renderTags(){
    const set = new Set(); posts.forEach(p=> (p.tags||[]).forEach(t=> set.add(t)) );
    const all = Array.from(set).sort();
    tagsWrap.innerHTML = '';
    const make = (t)=>{ const b=document.createElement('button'); b.className='badge'; b.style.cursor='pointer'; b.textContent=t; return b };
    all.forEach(t=>{ const b = make(t); b.addEventListener('click', ()=>applyFilter()); tagsWrap.appendChild(b); });
  }
  function applyFilter(){
    const term = input.value.toLowerCase();
    const activeTags = $$('#tags .active').map(x=>x.textContent.toLowerCase());
    const list = posts.filter(p=>{
      const inTitle = p.title.toLowerCase().includes(term);
      const hasTags = activeTags.length===0 || (p.tags||[]).some(t=> activeTags.includes(t.toLowerCase()));
      return inTitle && hasTags;
    });
    render(list);
  }
  tagsWrap.addEventListener('click', (e)=>{
    if(e.target.classList.contains('badge')){
      e.target.classList.toggle('active');
      e.target.style.background = e.target.classList.contains('active') ? '#253047' : '#192233';
      applyFilter();
    }
  });
  const input = document.getElementById('q');
  input.addEventListener('input', debounce(applyFilter, 150));
  </script>
</body>
</html>
